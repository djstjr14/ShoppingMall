{% extends 'base.html' %}

{% block header %}
  <h1>{% block title %}Product_list{% endblock %}</h1>
{% endblock %}

{% block content %}
    <script>
        function delete_item(id) {
            $.ajax({
                url: '/cart/delete_item', data: id, type: 'POST', contentType: false, processData: false,
                success: function(data) {
                    if(data.result) {
                        location.reload();
                    }
                }
            });
        }
    </script>
  <ul class=lists>
  {% for item in lists %}
      <br>
        <li>
          <h3>product : {{ item.name}}  <br> price : {{ item.price|safe }}</h3>
          <a class="button button" onclick="delete_item({{ item.id }})">delete</a> <br>
        </li>
  {% else %}
      <li><em>No item exist.</em></li>
  {% endfor %}
  </ul>
    <ul class=totalprice><br><h2>Total Price : {{ totalprice }} </h2><br></ul>
    <br><input type = submit value = Purchase>
{% endblock %}
